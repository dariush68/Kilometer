{% load static %}
<div class="profile-page-aside col-xl-3 col-lg-4 col-md-6 center-section order-1">
    <div class="profile-box">
        <div class="profile-box-header">
            <div class="profile-box-avatar">
                <img src="{% static 'store/asset/image/homePage/svg/user.svg' %}" alt="">
            </div>
            <button data-toggle="modal" data-target="#myModal" class="profile-box-btn-edit">
                <i class="fa fa-pencil"></i>
            </button>
            <!-- Modal Core -->
            <div class="modal-share modal-width-custom modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">تغییر نمایه کاربری شما</h4>
                        </div>
                        <div class="modal-body">
                            <ul class="profile-avatars default text-center">
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/user.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-1.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-2.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-3.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-4.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-5.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-6.svg' %}">
                                </li>
                                <li>
                                    <img class="profile-avatars-item" src="{% static 'store/asset/image/homePage/svg/avatar-7.svg' %}">
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Modal Core -->
        </div>
        <div class="profile-box-username" id="user-name"></div>
        <div class="profile-box-tabs">
            <a href="{% url 'user_panel:passwordChange' %}" class="profile-box-tab profile-box-tab-access">
                <i class="now-ui-icons ui-1_lock-circle-open"></i>
                تغییر رمز
            </a>
            <a onclick="logout()" href="/" class="profile-box-tab profile-box-tab--sign-out">
                <i class="now-ui-icons media-1_button-power"></i>
                خروج از حساب
            </a>
        </div>
    </div>
    <div class="responsive-profile-menu show-md">
        <div class="btn-group">
            <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-navicon"></i>
                حساب کاربری شما
            </button>
            <div class="dropdown-menu dropdown-menu-right text-right">
                <a href="{% url 'user_panel:profile' %}" class="dropdown-item" id="sidebar-mobile-profile">
                    <i class="now-ui-icons users_single-02"></i>
                    پروفایل
                </a>
                <a href="{% url 'user_panel:profileOrders' %}" class="dropdown-item" id="sidebar-mobile-orders">
                    <i class="now-ui-icons shopping_basket"></i>
                    همه سفارش ها
                </a>
                <a href="{% url 'user_panel:profileOrdersReturn' %}" class="dropdown-item" id="sidebar-mobile-return-orders">
                    <i class="now-ui-icons files_single-copy-04"></i>
                    درخواست مرجوعی
                </a>
                <a href="{% url 'user_panel:profileFavorites' %}" class="dropdown-item" id="sidebar-mobile-favorites">
                    <i class="now-ui-icons ui-2_favourite-28"></i>
                    لیست علاقمندی ها
                </a>
                <a href="{% url 'user_panel:profilePersonalInfo' %}" class="dropdown-item" id="sidebar-mobile-personal-info">
                    <i class="now-ui-icons business_badge"></i>
                    اطلاعات شخصی
                </a>
                <a href="{% url 'user_panel:profileMyAddresses' %}" class="dropdown-item" id="sidebar-mobile-my-addresses">
                    <i class="now-ui-icons business_badge"></i>
                    آدرس های من
                </a>
            </div>
        </div>
    </div>
    <div class="profile-menu hidden-md">
        <div class="profile-menu-header">حساب کاربری شما</div>
        <ul class="profile-menu-items">
            <li>
                <a href="{% url 'user_panel:profile' %}" id="sidebar-profile">
                    <i class="now-ui-icons users_single-02"></i>
                    پروفایل
                </a>
            </li>
            <li>
                <a href="{% url 'user_panel:profileOrders' %}" id="sidebar-orders">
                    <i class="now-ui-icons shopping_basket"></i>
                    همه سفارش ها
                </a>
            </li>
            <li>
                <a href="{% url 'user_panel:profileOrdersReturn' %}" id="sidebar-return-orders">
                    <i class="now-ui-icons files_single-copy-04"></i>
                    درخواست مرجوعی
                </a>
            </li>
            <li>
                <a href="{% url 'user_panel:profileFavorites' %}" id="sidebar-favorites">
                    <i class="now-ui-icons ui-2_favourite-28"></i>
                    لیست علاقمندی ها
                </a>
            </li>
            <li class="w-100">
                <a href="{% url 'user_panel:profilePersonalInfo' %}"  id="sidebar-personal-info">
                    <i class="now-ui-icons business_badge"></i>
                    اطلاعات شخصی
                </a>
            </li>
            <li>
                <a href="{% url 'user_panel:profileMyAddresses' %}" id="sidebar-my-addresses">
                    <i class="now-ui-icons location_pin"></i>
                    آدرس های من
                </a>
            </li>
        </ul>
    </div>
</div>

{% block js %}
    <script src="{% static 'store/vendor/js/core/jquery.3.2.1.min.js' %}"></script>
    <script src="{% static 'store/vendor/js/core/axios.min.js' %}"></script>
    <script>
        let config = {
        headers: {
            Authorization: `Bearer ${localStorage.getItem('accessToken')}`
        },
    }
    axios.get('/api/user/info', config)
        .then(response => {
            let userInfo = response.data;
            $("#user-name").text(userInfo['name'])
        })
        .catch(error => {
            console.log(error.response)
        })
    </script>

    <script>
        const logout = () => {
            localStorage.setItem('accessToken' , '')
        }
    </script>
    <script>
        let pageURL = window.location.href.split('/')
        switch (pageURL[pageURL.length - 2]) {
            case 'profile':
                $("#sidebar-profile").addClass('active')
                $("#sidebar-mobile-profile").addClass('active-menu')
                break
            case 'profile-orders':
                $("#sidebar-orders").addClass('active')
                $("#sidebar-mobile-orders").addClass('active-menu')
                break
            case 'profile-orders-return':
                $("#sidebar-return-orders").addClass('active')
                $("#sidebar-mobile-return-orders").addClass('active-menu')
                break
            case 'profile-favorites':
                $("#sidebar-favorites").addClass('active')
                $("#sidebar-mobile-favorites").addClass('active-menu')
                break
            case 'profile-personal-info':
                $("#sidebar-personal-info").addClass('active')
                $("#sidebar-mobile-personal-info").addClass('active-menu')
                break
            case 'profile-my-addresses':
                $("#sidebar-my-addresses").addClass('active')
                $("#sidebar-mobile-my-addresses").addClass('active-menu')
                break
        }
    </script>

{% endblock %}